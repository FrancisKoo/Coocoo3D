<?xml version="1.0" encoding="utf-8" ?>
<PassSetting>
  <RenderSequence>
    <!--<Pass>
      <Name>DrawSkyBox</Name>
      <Type>DrawScreen</Type>
      <ClearDepth>1</ClearDepth>
      <RenderTarget>_Output0</RenderTarget>
      <DepthStencil>_ScreenDepth0</DepthStencil>
    </Pass>
    <Pass>
      <Name>ShadowMapPass</Name>
      <ClearDepth>1</ClearDepth>
      <DepthBias>3000</DepthBias>
      <SlopeScaledDepthBias>1.0</SlopeScaledDepthBias>
      <DepthStencil>_ShadowMap0</DepthStencil>
    </Pass>
    <Pass>
      <Name>Pass1</Name>
      <BlendMode>Alpha</BlendMode>
      <DepthStencil>_ScreenDepth0</DepthStencil>
      <RenderTarget>_Output0</RenderTarget>
    </Pass>-->
    <Pass>
      <Name>PassRayTracing</Name>
      <Type>RayTracing</Type>
      <RenderTarget>_Output0</RenderTarget>
    </Pass>
  </RenderSequence>
  <RenderTargets>
    <RenderTarget>
      <Name>_ShadowMap0</Name>
      <Size>
        <Source>ShadowMapSize</Source>
      </Size>
      <Format>DXGI_FORMAT_D32_FLOAT</Format>
    </RenderTarget>
    <RenderTarget>
      <Name>_ScreenDepth0</Name>
      <Size>
        <Source>OutputSize</Source>
      </Size>
      <Format>DXGI_FORMAT_D32_FLOAT</Format>
    </RenderTarget>
  </RenderTargets>
  <Passes>
    <Pass>
      <Name>ShadowMapPass</Name>
      <Camera>ShadowMap</Camera>
      <VertexShader>VS_ShadowMap</VertexShader>
      <CBV>
        <Index>0</Index>
        <Datas>
          <Data>Camera</Data>
        </Datas>
      </CBV>
    </Pass>
    <Pass>
      <Name>DrawSkyBox</Name>
      <Camera>Main</Camera>
      <VertexShader>VS_SkyBox</VertexShader>
      <PixelShader>PS_SkyBox</PixelShader>
      <CBV>
        <Index>0</Index>
        <Datas>
          <Data>Camera</Data>
          <Data>CameraPosition</Data>
          <Data>IndirectMultiplier</Data>
        </Datas>
      </CBV>
      <SRV>
        <Index>3</Index>
        <ResourceType>TextureCube</ResourceType>
        <Resource>_SkyBox</Resource>
      </SRV>
    </Pass>
    <Pass>
      <Name>Pass1</Name>
      <Camera>Main</Camera>
      <VertexShader>VS_Pass1</VertexShader>
      <PixelShader>PS_Pass1</PixelShader>
      <CBV>
        <Index>0</Index>
        <Datas>
          <Data>Camera</Data>
          <Data>DirectionalLight</Data>
          <Data>PointLights4</Data>
          <Data>Metallic</Data>
          <Data>Roughness</Data>
          <Data>Emission</Data>
          <Data>Specular</Data>
          <Data>Diffuse</Data>
          <Data>CameraPosition</Data>
          <Data>IndirectMultiplier</Data>
        </Datas>
      </CBV>
      <SRV>
        <Index>0</Index>
        <ResourceType>Texture2D</ResourceType>
        <Resource>_Albedo</Resource>
      </SRV>
      <SRV>
        <Index>1</Index>
        <ResourceType>Texture2D</ResourceType>
        <Resource>_Albedo</Resource>
      </SRV>
      <SRV>
        <Index>2</Index>
        <ResourceType>Texture2D</ResourceType>
        <Resource>_ShadowMap0</Resource>
      </SRV>
      <SRV>
        <Index>3</Index>
        <ResourceType>TextureCube</ResourceType>
        <Resource>_SkyBoxReflect</Resource>
      </SRV>
      <SRV>
        <Index>4</Index>
        <ResourceType>TextureCube</ResourceType>
        <Resource>_SkyBoxIrradiance</Resource>
      </SRV>
      <SRV>
        <Index>5</Index>
        <ResourceType>Texture2D</ResourceType>
        <Resource>_BRDFLUT</Resource>
      </SRV>
    </Pass>
    <Pass>
      <Name>PassRayTracing</Name>
      <Camera>Main</Camera>
      <RayTracingStateObject>RTTest</RayTracingStateObject>
      <CBV>
        <Index>0</Index>
        <Datas>
          <Data>Camera</Data>
          <Data>CameraPosition</Data>
          <Data>IndirectMultiplier</Data>
        </Datas>
      </CBV>
      <RayTracingShader></RayTracingShader>
      <SRV>
        <Index>0</Index>
        <ResourceType>TopAccelerateStructure</ResourceType>
      </SRV>
    </Pass>
  </Passes>
  <RayTracingStateObject>
    <Name>RTTest</Name>
    <Path>ms-appx:///Coocoo3DGraphics/Raytracing2.cso</Path>
    <MaxPayloadSize>32</MaxPayloadSize>
    <MaxAttributeSize>8</MaxAttributeSize>
    <MaxRecursionDepth>2</MaxRecursionDepth>
    <RayGenShader>
      <Name>MyRaygenShader</Name>
    </RayGenShader>
    <MissShader>
      <Name>MyMissShader</Name>
    </MissShader>
    <HitGroupSubobject>
      <Name>Test</Name>
      <!--<AnyHitShader></AnyHitShader>-->
      <ClosestHitShader>MyClosestHitShader</ClosestHitShader>
    </HitGroupSubobject>
  </RayTracingStateObject>
</PassSetting>